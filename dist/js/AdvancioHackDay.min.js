window.onload=function(){var e=document.getElementById("music"),t=redaMusicSpectrum.Bootstrapper.init();t.launch(e)};var redaMusicSpectrum;!function(e){var t=function(){function e(){if(e._spectrum)throw new Error("Error: Instantiation failed: try init() instead of new.");e._spectrum=this}return e.init=function(){return e._spectrum},e.prototype.launch=function(e){var t=e;if(this.checkWebGlSupport(t)){var n=window.innerWidth,o=window.innerHeight;t.width=n,t.height=o;var r,i,a=new AudioContext,c=t.getContext("2d"),u=void 0,d="../audio/Alan Walker - Fade [NCS Release].mp3",l=c.createLinearGradient(0,0,0,o/2);l.addColorStop(0,"#aac8de"),l.addColorStop(.25,"#44a1e2"),l.addColorStop(.75,"#0d83d5"),l.addColorStop(1,"#005a99"),u=a.createScriptProcessor(2048,1,1),u.connect(a.destination),i=a.createAnalyser(),i.smoothingTimeConstant=.4,i.fftSize=1024,r=a.createBufferSource();var p=new XMLHttpRequest;p.open("GET",d,!0),p.responseType="arraybuffer",p.onload=function(){a.decodeAudioData(p.response,function(e){r.buffer=e,r.start(0)},function(e){console.log(e)})},p.send(),r.connect(i),i.connect(u),r.connect(a.destination),u.onaudioprocess=function(){var e=new Uint8Array(i.frequencyBinCount);i.getByteFrequencyData(e),c.clearRect(0,0,n,o);for(var t=0;t<e.length;t++){var r=e[t];c.fillStyle=l,c.fillRect(4*t,o/2-r,3,o/2-(o/2-r)),c.fillStyle="#323232",c.fillRect(4*t,o/2,3,r)}}}},e.prototype.checkWebGlSupport=function(e){var t=!0;try{e.getContext("2d")||e.getContext("webgl")||e.getContext("experimental-webgl"),t=!0}catch(n){e=null,console.log("WebGL not supported"),t=!1}return t},e._spectrum=new e,e}();e.Bootstrapper=t}(redaMusicSpectrum||(redaMusicSpectrum={}));